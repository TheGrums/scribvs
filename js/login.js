var cgu = "<div class='well' style='height:45vh;overflow-y:scroll;width: 90%;margin: auto;text-align:left;'>";
  cgu += "<h2 style='text-align:left;'>Conditions générales d'utilisation.</h2>";
  cgu += "<h3 style='margin-top:30px;text-align:left;'><span class='cgu-before-p'>1. </span>Introduction</h3>";
  cgu += "<p style='text-align:left;font-family:none;margin:10px 0px;'>";
  cgu += "Le présent document a pour objet de définir les modalités et conditions du site www.scribvs.com, ci-après dénommé le SERVICE, auquel toute connexion est subordonnée au respect des présentes conditions. Pour l’utilisateur, le simple accès au SERVICE aux adresses URL suivantes http://scribvs.com, http://www.scribvs.com implique l’acceptation de l’ensemble des conditions décrites ci-après. Les éventuelles modifications de ces dernières vous seront communiquées sans délai.";
  cgu +="</p>";

  cgu += "<h3 style='margin-top:30px;text-align:left;'><span class='cgu-before-p'>2. </span>Propriété intellectuelle.</h3>";
  cgu += "<p style='text-align:left;font-family:none;margin:10px 0px;'>";
  cgu += "La structure générale du SERVICE, ainsi que les textes, graphiques, images, sons et vidéos la composant, sont la propriété de M. Grumiaux. Toute représentation et/ou reproduction et/ou exploitation partielle ou totale des services proposés par le SERVICE, par quelque procédé que ce soit, sans l'autorisation préalable et par écrit de M. Grumiaux et/ou de ses partenaires est strictement interdite et serait susceptible de constituer une contrefaçon fera potentiellement l'objet de poursuites judiciaires.";
  cgu +="</p>";

  cgu += "<h3 style='margin-top:30px;text-align:left;'><span class='cgu-before-p'>3. </span>Informations fournies par le MEMBRE.</h3>";
  cgu += "<p style='text-align:left;font-family:none;margin:10px 0px;'>";
  cgu += " Chaque MEMBRE garantit au SERVICE que les informations qu'il fournit quant à son identité et ses coordonnées dans le cadre du SERVICE sont exactes, véridiques, complètes et à jour. Le MEMBRE est seul responsable de la sincérité et de l'exactitude de ces informations. Le MEMBRE s'engage à mettre à jour régulièrement l'ensemble des informations afin de préserver leur exactitude. Le SERVICE ne pourra en aucun cas être tenu responsable des erreurs, omissions, imprécisions pouvant être relevées dans les informations fournies par le MEMBRE, ni du préjudice pouvant éventuellement en découler pour les autres MEMBRES. ";
  cgu +="</p>";

  cgu += "<h3 style='margin-top:30px;text-align:left;'><span class='cgu-before-p'>4. </span>Charte de bonne conduite.</h3>";

  cgu += "<p style='text-align:left;font-family:none;margin:10px 0px;'>";
  cgu += "<span class='cgu-before-p' style='font-size:20px;opacity:.5'>4.1. </span>Tout utilisateur inscrit au SERVICE (ci-après le MEMBRE) est prié de se conformer aux règles mentionnées ci-après sans quoi les administrateurs du site se réservent le droit d'exclure ce dernier du SERVICE.";
  cgu +="</p>";

  cgu += "<p style='text-align:left;font-family:none;margin:10px 0px;'>";
  cgu += "<span class='cgu-before-p' style='font-size:20px;opacity:.5'>4.2. </span>En accédant au SERVICE par le biais d'une inscription le MEMBRE s'engage à respecter les règles relatives au contenu multimédia stipulées dans le Règlement d'Ordre Intérieur de son établissement scolaire.";
  cgu +="</p>";

  cgu += "<p style='text-align:left;font-family:none;margin:10px 0px;'>";
  cgu += "<span class='cgu-before-p' style='font-size:20px;opacity:.5'>4.3. </span>Outre ces règles extérieures, le MEMBRE s'engage à faire preuve de respect et de savoir vivre envers les autres MEMBRES. Toute forme de harcèlement est totalement prohibée et passible de lourdes sanctions. Il est donc interdit de publier des éléments injurieux, diffamatoires ou à caractère sexuel, en enfreingant cette règle le MEMBRE s'expose à une supression de son compte sans préavis par les administrateurs du service. ";
  cgu +="</p>";

  cgu += "<p style='text-align:left;font-family:none;margin:10px 0px;'>";
  cgu += "<span class='cgu-before-p' style='font-size:20px;opacity:.5'>4.4. </span>De surcroît, les données numériques mises en ligne par le MEMBRE ne doivent en aucun cas être soumises à des droits d'auteur quels qu'ils soient non détenus par ledit MEMBRE. Si cette règle est enfreinte les administrateurs du SERVICE s'engagent à supprimer le contenu frauduleux lors du rapport des faits.";
  cgu +="</p>";

  cgu += "<p style='text-align:left;font-family:none;margin:10px 0px;'>";
  cgu += "<span class='cgu-before-p' style='font-size:20px;opacity:.5'>4.5. </span>Lors de la publication de données dont le MEMBRE est propriétaire, ce dernier s'engage de manière tacite de les mettre à disposition de tous les MEMBRES du SERVICE le temps de leur mise en ligne.";
  cgu +="</p>";

  cgu += "<h3 style='margin-top:30px;text-align:left;'><span class='cgu-before-p'>5. </span>Cookies</h3>";
  cgu += "<p style='text-align:left;font-family:none;margin:10px 0px;'>";
  cgu += "Des cookies seront stockés dans les navigateurs de tous les MEMBRES pour permettre entre autres une connection automatique (sans identification) au SERVICE pendant une durée de 7 jours. Les données seront cryptées et les administrateurs du SERVICE mettent tout en oeuvre pour rendre la sécurité de ces dernières inviolable. Tout MEMBRE a le droit d'obtenir des informations techniques supplémentaires en contactant les administrateurs (webmaster@scribvs.com).";
  cgu +="</p>";

  cgu += "<h3 style='margin-top:30px;text-align:left;'><span class='cgu-before-p'>6. </span>Cas de litiges</h3>";
  cgu += "<p style='text-align:left;font-family:none;margin:10px 0px;'>";
  cgu += "Les présentes conditions sont soumises à la loi belge. En cas de difficultés dans leur application,le MEMBRE aura la possibilité,avant toute action en justice,de rechercher une solution à l'amiable. A défaut seul le tribunal de Namur sera compétent.";
  cgu +="</p>";

  cgu += "<h3 style='margin-top:30px;text-align:left;'><span class='cgu-before-p'>7. </span>Interruptions du service et mises à jour.</h3>";
  cgu += "<p style='text-align:left;font-family:none;margin:10px 0px;'>";
  cgu += "Nous nous engagons à mettre tout en oeuve pour assurer le bon fonctionnement de la plateforme et ceci ne peut être garanti sans une constante évolution. Cette dernière aura lieu, dans la mesure du possible, sans entrainer de désagréments chez les MEMBRES.";
  cgu += "Les administrateurs du SERVICE se réservent néanmoins le droit de suspendre l'accès au SERVICE sans préavis dans le but d'effectuer des changements majeurs.";
  cgu +="</p>";

  cgu += "<h3 style='margin-top:30px;text-align:left;'><span class='cgu-before-p'>8. </span>Mentions légales.</h3>";
  cgu += "<p style='text-align:left;font-family:none;margin:10px 0px;'>";
  cgu += "Le SERVICE collecte les informations à caractère personnel suivantes : </p><ul style='text-align:left;'><li style='text-align:left;'>données d'identification</li> <li style='text-align:left;'>données d'identification électronique (adresse IP, cookies)</li> <li style='text-align:left;'>loisirs et intérêts</li> <li style='text-align:left;'>éducation/formation</li> <li style='text-align:left;'>profession/emploi</li> <li style='text-align:left;'>enregistrements audio et vidéos</li> <li style='text-align:left;'>photos</li></ul>";
  cgu += "<p style='text-align:left;font-family:none;margin:10px 0px;'>Données fournies par le MEMBRE concerné qui, excepté les données d'identifications électroniques, pourront potentiellement être communiquées au relations personnelles de ce dernier. Tout MEMBRE est libre d'accéder à ses propres informations et de les modifier, il a aussi la possibilité de supprimer son propre compte en contactant les administrateurs du site (webmaster@scribvs.com).";
  cgu += "</p>";
  cgu += "<p style='text-align:left;font-family:none;margin:10px 0px;'>";
  cgu += "La plateforme www.scribvs.com est hébergée par la société OVH (<a href='https://www.ovh.com'>www.ovh.com</a>) dont le siège social se situe <strong>2 rue Kellermann - 59100 Roubaix - France.</strong>";
  cgu += "</p>";
  cgu += "<p style='text-align:left;font-family:none;margin:10px 0px;'>";
  cgu += "Le SERVICE est édité par Loïc Grumiaux à titre non-professionnel.";
  cgu += "</p>";

  cgu += "</div>";

function validateEmail(email) {
    var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(email);
}
$(document).ready(function(){

	$("#register-btn").click(function(e){

		e.preventDefault();
		var form_values = {};
		var ok = true;

		$("#register-form .required").each(function(){

			if($.trim($(this).val()) == ""){

				$(this).css("border-color","red");
				$(this).addClass("shake");
				ok = false;

			}



			else{

				var name = $(this).attr('id');
				form_values[name] = $.trim($(this).val());
				$(this).css("border-color","#CCCCCC");
				$(this).removeClass("shake");

			}


		});
		if($("#pass1").val() != $("#pass2").val()){

			ok = false;
			$("#pass2").val('');
			$("#pass2").css("border-color","red");
			$("#pass2").addClass("shake");
			$("#pass2").attr("placeholder","Mots de passes différents");

		}

		if(!validateEmail($("#email").val())){
			ok=false;
			$("#email").val("");
			$("#email").css("border-color","red");
			$("#email").addClass("shake");
			$("#email").attr("placeholder","Adresse invalide");
		}

		if(ok){

			var year = $( "#year option:selected" ).text();
			form_values["class-id"] = year+form_values["class-id"].toUpperCase();

			$(".home-form").css("display","none");
			$(".cssload-loader-inner").fadeIn("slow");

			confirmEmbed(cgu,"Annuler","J'accepte");

			$("body").on('click','#opt2',function(){
				$.ajax({

					type	:"POST",
					url		:"./AJAX/register.php",
					data	:form_values,
					dataType : "html",
					success: function(data){
						if($.trim(data) == "ok"){

							window.location.href = "./profile.php?q="+$("#name").val()+"-"+$("#firstname").val();

						}
						else{
							$(".yolo").remove();
							$("#register-btn").parents().eq(0).append(data);
							$("body").off("click","#opt1");
							$("body").off("click","#opt2");
							$(".lightbox").fadeOut("fast", function() { $(this).remove();$(".overlay").fadeOut("fast", function() { $(this).remove();}) });

						}

					},
					error: function(){
							$(".home-form").fadeIn("slow");
							$(".cssload-loader-inner").css("display","none");
							$(".home-form").append("<p class = 'info-text'>Une erreur s'est produite, veuillez réessayer.</p>");

					}

				});
			});

			$("body").on("click","#opt1",function(){
				$("body").off("click","#opt1");
				$("body").off("click","#opt2");
				$(".lightbox").fadeOut("fast", function() { $(this).remove();$(".overlay").fadeOut("fast", function() { $(this).remove();}) });
			});

		}


	});

	$("#login-btn").click(function(e){
		e.stopPropagation();
		e.preventDefault();
		$.ajax({
			url : "./AJAX/login.php",
			method : "POST",
			dataType : "html",
			data : {"pass":$("#pass-lg-input").val(),"mail":$("#mail-lg-input").val()},
			success : function(data){
				var response = parseInt(data);
				if(response<=0){
					switch (response){
						case 0:
							$("#pass-fail").fadeIn();
							setTimeout(function(){$("#pass-fail").fadeOut();},2000);
						break;
						case -1:
							$("#mail-fail").fadeIn();
							setTimeout(function(){$("#mail-fail").fadeOut();},2000);
						break;
						case -2:
							$("#error-fail").fadeIn();
							setTimeout(function(){$("#error-fail").fadeOut();},2000);
						break;
					}
				}
				else{
					window.location.href = "./thread.php";
				}
			}
		});

	});
});
